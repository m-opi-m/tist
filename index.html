<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MahWay</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      color: white;
      text-align: center;
      background: url('https://eetaeyba365.exactdn.com/wp-content/uploads/2022/02/b09f8c8f-41b6-4cdb-8724-aba38d7a987c.jpg?strip=all&lossy=1&ssl=1') no-repeat center center fixed;
      background-size: cover;
      animation: fadeIn 2s ease-in-out;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding-top: 100px;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    /* الشريط الثابت المحسن */
    .fixed-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      padding: 8px 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(135deg, rgba(0,0,0,0.95) 0%, rgba(30,30,30,0.95) 100%);
      box-shadow: 0 4px 20px rgba(0,0,0,0.5), 0 1px 0 rgba(255,215,0,0.1) inset;
      z-index: 3000;
      transition: all 0.3s ease;
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(255,215,0,0.3);
      transform: translateY(0);
      height: 65px;
    }
    
    .fixed-header.hide {
      transform: translateY(-100%);
    }

    .fixed-header.scrolled {
      padding: 6px 15px;
      height: 55px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.4);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.3s ease;
    }

    .header-left.scrolled {
      transform: scale(0.95);
    }

    .header-left img {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: 2px solid gold;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(255,215,0,0.3);
    }

    .header-left.scrolled img {
      width: 36px;
      height: 36px;
    }

    .header-left h1 {
      font-size: 1.7rem;
      margin: 0;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
      transition: all 0.3s ease;
      background: linear-gradient(to right, #ffd700, #ffb700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .header-left.scrolled h1 {
      font-size: 1.5rem;
    }

    .lang-switcher {
      background: rgba(20,20,20,0.8);
      padding: 6px 12px;
      border-radius: 50px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,215,0,0.3);
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      height: 40px;
    }
    
    .lang-switcher:hover {
      background: rgba(30,30,30,0.9);
      border-color: gold;
      box-shadow: 0 0 15px rgba(255,215,0,0.2);
    }

    .lang-switcher.scrolled {
      padding: 5px 10px;
      height: 36px;
    }
    
    .flags-container {
      display: flex;
      gap: 8px;
    }
    
    .flag-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .flag-btn:hover {
      background: rgba(255,255,255,0.1);
      transform: translateY(-2px);
    }
    
    .flag-btn.active {
      background: rgba(255,215,0,0.2);
      box-shadow: 0 0 0 2px gold;
      transform: scale(1.05);
    }
    
    .flag-img {
      width: 26px;
      height: 18px;
      object-fit: cover;
      border-radius: 3px;
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .flag-btn:hover .flag-img {
      transform: scale(1.1);
    }
    
    .flag-btn.active .flag-img {
      border-color: gold;
    }

    /* بقية الأنماط تبقى كما هي */
    .forms-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 25px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    form {
      background: rgba(0, 0, 0, 0.7);
      padding: 25px;
      border-radius: 15px;
      margin: 10px 0;
      max-width: 450px;
      width: 100%;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,215,0,0.3);
    }

    form h3 {
      margin-top: 0;
      color: gold;
      font-size: 1.4rem;
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(255,215,0,0.5);
    }

    input, select, textarea, button {
      display: block;
      width: 100%;
      margin: 12px 0;
      padding: 12px 15px;
      border: none;
      border-radius: 8px;
      font-family: 'Cairo', sans-serif;
      font-size: 1rem;
      background: rgba(255,255,255,0.1);
      color: white;
      transition: all 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      background: rgba(255,255,255,0.15);
      box-shadow: 0 0 8px rgba(255,215,0,0.3);
    }

    input::placeholder, textarea::placeholder {
      color: rgba(255,255,255,0.6);
    }

    button {
      background: linear-gradient(to right, #ffb700, #ff8c00);
      color: #222;
      font-weight: bold;
      cursor: pointer;
      font-size: 1.1rem;
      margin-top: 20px;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.4);
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .rating-container {
      margin: 30px auto;
      background-color: rgba(0,0,0,0.7);
      border-radius: 15px;
      padding: 25px;
      max-width: 600px;
      border: 1px solid rgba(255,215,0,0.3);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    .rating {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #ffd700;
    }

    .stars {
      font-size: 2.5rem;
      color: #444;
      cursor: pointer;
      margin: 15px 0;
      display: flex;
      justify-content: center;
      gap: 8px;
    }

    .stars span {
      transition: all 0.2s ease;
      position: relative;
    }

    .stars span.active {
      color: gold;
      text-shadow: 0 0 15px gold;
      transform: scale(1.1);
    }

    .stars span:hover:not(.disabled) {
      transform: scale(1.2);
      text-shadow: 0 0 10px gold;
    }

    .stars span.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .rating-numbers {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin-top: -10px;
      margin-bottom: 15px;
    }

    .rating-number {
      font-size: 1.1rem;
      font-weight: bold;
      width: 25px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255,255,255,0.7);
      transition: all 0.3s ease;
    }

    .rating-number.active {
      color: gold;
      background: rgba(255,215,0,0.2);
      border-radius: 50%;
      transform: scale(1.2);
    }

    .last-rating {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255,215,0,0.15);
      border-radius: 10px;
      display: none;
      font-size: 1.1rem;
      border: 1px solid rgba(255,215,0,0.3);
    }

    footer {
      margin-top: auto;
      background-color: rgba(0,0,0,0.7);
      padding: 20px;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.2);
    }

    .floating-btn {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background: linear-gradient(to right, #ffb700, #ff8c00);
      color: #222;
      width: 65px;
      height: 65px;
      border-radius: 50%;
      border: none;
      font-size: 32px;
      cursor: pointer;
      box-shadow: 0 6px 15px rgba(0,0,0,0.4);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .floating-btn:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    }

    .social-links {
      position: fixed;
      bottom: 100px;
      right: 25px;
      background: rgba(0,0,0,0.8);
      border-radius: 15px;
      padding: 15px;
      display: none;
      flex-direction: column;
      gap: 12px;
      z-index: 999;
      border: 1px solid rgba(255,215,0,0.3);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    .social-links a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 15px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .social-links a:hover {
      background: rgba(255,215,0,0.2);
      transform: translateX(-5px);
    }

    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.95);
      padding: 30px;
      border-radius: 15px;
      z-index: 2000;
      color: white;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      border: 2px solid rgba(255,215,0,0.5);
      text-align: right;
      direction: rtl;
    }
    
    .modal h3 {
      margin-top: 0;
      color: gold;
      font-size: 1.5rem;
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(255,215,0,0.5);
    }
    
    .modal textarea {
      width: 100%;
      height: 150px;
      margin: 15px 0 25px;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #444;
      background: rgba(255,255,255,0.1);
      color: white;
      font-family: 'Cairo', sans-serif;
      font-size: 1rem;
      resize: vertical;
      transition: all 0.3s ease;
    }
    
    .modal textarea:focus {
      outline: none;
      border-color: gold;
      box-shadow: 0 0 10px rgba(255,215,0,0.3);
    }
    
    .modal .modal-buttons {
      display: flex;
      justify-content: space-between;
      gap: 15px;
    }
    
    .modal button {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }
    
    .modal .submit-btn {
      background: linear-gradient(to right, #ffb700, #ff8c00);
      color: #222;
      flex: 1;
    }
    
    .modal .cancel-btn {
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.3);
      flex: 1;
    }
    
    .modal .cancel-btn:hover {
      background: rgba(255,255,255,0.2);
    }
    
    .thank-you-message {
      text-align: center;
      padding: 20px;
      display: none;
    }
    
    .thank-you-message p {
      font-size: 1.3rem;
      margin-bottom: 25px;
      color: gold;
    }
    
    .thank-you-message .rating-display {
      font-size: 1.8rem;
      color: gold;
      margin: 20px 0;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
    }
    
    .thank-you-message .submit-btn {
      width: 100%;
      max-width: 200px;
      margin: 20px auto 0;
    }
    
    #error-message {
      color: #ff6b6b;
      text-align: center;
      margin-top: -10px;
      margin-bottom: 15px;
      font-size: 0.95rem;
      display: none;
    }
    
    .form-title {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .form-title i {
      color: gold;
      font-size: 1.8rem;
    }
    
    .confirmation-modal-content {
      text-align: center;
      padding: 20px;
    }
    
    .confirmation-modal-content i {
      font-size: 3.5rem;
      color: gold;
      margin-bottom: 20px;
    }
    
    .confirmation-modal-content p {
      font-size: 1.4rem;
      margin-bottom: 25px;
      line-height: 1.6;
    }
    
    .countdown-display {
      font-size: 1.2rem;
      background: rgba(255,215,0,0.1);
      padding: 8px 15px;
      border-radius: 8px;
      margin-top: 15px;
      border: 1px solid rgba(255,215,0,0.2);
    }
    
    @media (max-width: 768px) {
      .forms-container {
        flex-direction: column;
        align-items: center;
      }
      
      form {
        max-width: 95%;
      }
      
      .stars {
        font-size: 2rem;
      }
      
      .rating {
        font-size: 1.1rem;
      }
      
      .rating-number {
        font-size: 0.95rem;
        gap: 12px;
      }
      
      .fixed-header {
        flex-direction: column;
        padding: 10px;
        height: auto;
      }
      
      .header-left {
        margin-bottom: 10px;
      }
      
      .lang-switcher {
        width: 100%;
        justify-content: center;
        margin-top: 5px;
      }
      
      .fixed-header.scrolled {
        padding: 8px 15px;
      }
      
      .header-left.scrolled img {
        width: 35px;
        height: 35px;
      }
      
      .header-left.scrolled h1 {
        font-size: 1.5rem;
      }
      
      .flags-container {
        gap: 5px;
      }
      
      .flag-btn {
        width: 35px;
        height: 35px;
      }
      
      .flag-img {
        width: 25px;
        height: 17px;
      }
    }
  </style>
</head>
<body>
  <!-- الشريط الثابت المحسن -->
  <div class="fixed-header" id="fixedHeader">
    <div class="header-left" id="headerLeft">
     <img src="https://raw.githubusercontent.com/MahWay26/MahWay/refs/heads/main/027187e0-e47c-4b04-b0fc-4104a213cc6b.png" alt="logo">
      <h1>MahWay</h1>
    </div>
    
    <div class="lang-switcher" id="langSwitcher">
      <div class="flags-container">
        <button class="flag-btn active" data-lang="ar" title="العربية">
          <img src="https://upload.wikimedia.org/wikipedia/commons/f/fe/Flag_of_Egypt.svg" alt="علم مصر" class="flag-img">
        </button>
        <button class="flag-btn" data-lang="en" title="English">
          <img src="https://upload.wikimedia.org/wikipedia/en/a/ae/Flag_of_the_United_Kingdom.svg" alt="علم بريطانيا" class="flag-img">
        </button>
      </div>
    </div>
  </div>

  <div class="forms-container">
    <form id="localForm" action="https://formspree.io/f/xnqepqyk" method="POST">
      <div class="form-title">
        <i class="fas fa-truck"></i>
        <h3 id="local-title">شحن داخل مصر</h3>
      </div>
      <input type="text" name="sender" placeholder="اسم الراسل" required>
      <input type="text" name="receiver" placeholder="اسم المرسل إليه" required>
      <input type="tel" name="phone" id="phone1" placeholder="رقم الهاتف" required>
      <select name="service" id="local-service">
        <option value="fast">سريعة</option>
        <option value="normal">عادية</option>
      </select>
      <input type="text" name="address" placeholder="العنوان" required>
      <textarea name="details" placeholder="وصف الشحنة" required></textarea>
      <button type="submit" id="submit-btn1">أرسل</button>
      <div id="local-countdown" class="countdown-display" style="display:none;"></div>
    </form>

    <form id="intlForm" action="https://formspree.io/f/xnqepqyk" method="POST">
      <div class="form-title">
        <i class="fas fa-globe-africa"></i>
        <h3 id="intl-title">استيراد من خارج مصر</h3>
      </div>
      <input type="text" name="name" placeholder="اسم العميل" required>
      <input type="tel" name="phone" id="phone2" placeholder="رقم الهاتف" required>
      <input type="text" name="cargo" placeholder="نوع الحمولة" required>
      <input type="text" name="weight" placeholder="الوزن المتوقع" required>
      <select name="service" id="intl-service">
        <option value="fast">سريعة</option>
        <option value="normal">عادية</option>
      </select>
      <input type="text" name="country" placeholder="الدولة المُرسِل منها" required>
      <input type="text" name="delivery-address" placeholder="العنوان في مصر" required>
      <textarea name="description" placeholder="تفاصيل إضافية"></textarea>
      <button type="submit" id="submit-btn2">أرسل</button>
      <div id="intl-countdown" class="countdown-display" style="display:none;"></div>
    </form>
  </div>

  <div class="rating-container">
    <div class="rating">
      <p id="rating-text">تقييم <strong>4.5/5</strong> من <strong>3,344</strong> مستخدم</p>
    </div>
    
    <div class="stars" id="stars">
      <span data-val="1">★</span>
      <span data-val="2">★</span>
      <span data-val="3">★</span>
      <span data-val="4">★</span>
      <span data-val="5">★</span>
    </div>
    
    <div class="rating-numbers" id="ratingNumbers">
      <span class="rating-number" data-val="1">1</span>
      <span class="rating-number" data-val="2">2</span>
      <span class="rating-number" data-val="3">3</span>
      <span class="rating-number" data-val="4">4</span>
      <span class="rating-number" data-val="5">5</span>
    </div>
    
    <div class="last-rating" id="lastRating">
      <p id="last-rating-text">آخر تقييم لك: <span id="user-rating"></span></p>
    </div>
  </div>

  <div id="feedbackModal" class="modal">
    <div id="error-message">الرجاء كتابة تعليق قبل الإرسال</div>
    
    <div id="feedbackForm">
      <h3 id="feedback-title">اكتب تعليقك أو نصيحتك:</h3>
      <textarea id="feedbackText" placeholder="شاركنا بتجربتك معنا..."></textarea>
      <div class="modal-buttons">
        <button class="cancel-btn" onclick="closeModal()" id="cancel-btn">إلغاء</button>
        <button class="submit-btn" onclick="submitFeedback()" id="feedback-btn">إرسال</button>
      </div>
    </div>
    
    <div class="thank-you-message" id="thankYouMessage">
      <p>شكراً لتقييمك وتعليقك!</p>
      <div class="rating-display">
        تقييمك: <span id="submittedRating"></span>
      </div>
      <button class="submit-btn" onclick="closeModal()">حسناً</button>
    </div>
  </div>

  <div id="confirmationModal" class="modal">
    <div class="confirmation-modal-content">
      <i class="fas fa-check-circle"></i>
      <p id="confirmation-text">سيتم التواصل معك قريباً</p>
      <button class="submit-btn" onclick="closeConfirmationModal()" id="confirmation-btn">حسناً</button>
    </div>
  </div>

  <footer>
    <div class="info" id="info-text">
      تأسست: 26/1/2020 | رقم السجل التجاري: 54645612<br>
      محمود مدحت صادق - المالك الوحيد للشركة
    </div>
    <a id="email-link" href="mailto:mahway.contact@gmail.com?subject=استفسار عن خدمة&body=مرحباً ماه واي، لدي سؤال بخصوص..." style="color:gold;text-decoration:none;">
      <i class="fas fa-envelope"></i> mahway.contact@gmail.com
    </a>
    <br>
    <a href="https://www.pdfquran.com/download/big/big-quran.pdf" target="_blank" style="color: gold; font-weight: bold; display: inline-block; margin: 15px 0; font-size: 0.9rem;">
      <i class="fas fa-book-quran"></i> إذَا مَاتَ الإِنْسَانُ انْقَطَعَ عَمَلُهُ إلاَّ مِنْ ثَلاَثٍ : صَدَقَةٍ جَارِيَةٍ ، أَوْ عِلْمٍ يُنْتَفَعُ بِهِ ، أَوْ وَلَدٍ صَالِحٍ يَدْعُو لَهُ
    </a>
    <br>
    <a href="https://maps.app.goo.gl/fUWsV66ZYTRNYumQ8" target="_blank" style="color: #00bfff; display: inline-block; margin-top: 10px; font-weight: bold;">
      <i class="fas fa-map-marker-alt"></i> Our location in Egypt
    </a>
  </footer>

  <button class="floating-btn" onclick="toggleSocialLinks()">+</button>
  <div class="social-links" id="socialLinks">
    <a href="https://www.facebook.com/mahmoud.opi.777" target="_blank">
      <i class="fab fa-facebook"></i> Facebook
    </a>
    <a href="https://wa.me/201559723397" target="_blank">
      <i class="fab fa-whatsapp"></i> WhatsApp
    </a>
    <a href="https://t.me/MahmoudMedhatOfficial" target="_blank">
      <i class="fab fa-telegram"></i> Telegram
    </a>
  </div>

  <script>
    // تحميل حالة التقييم عند فتح الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      checkRatingStatus();
      checkFormTimers();
      setupHeaderScroll();
      setupAutoHideHeader();
      
      // إضافة مستمعين لأزرار الأعلام
      document.querySelectorAll('.flag-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const lang = this.getAttribute('data-lang');
          changeLang(lang);
          
          // تحديث حالة الأزرار النشطة
          document.querySelectorAll('.flag-btn').forEach(b => {
            b.classList.remove('active');
          });
          this.classList.add('active');
        });
      });
    });

    // إضافة تأثير التمرير للشريط العلوي
    function setupHeaderScroll() {
      const fixedHeader = document.getElementById('fixedHeader');
      const headerLeft = document.getElementById('headerLeft');
      const langSwitcher = document.getElementById('langSwitcher');
      
      window.addEventListener('scroll', function() {
        if (window.scrollY > 50) {
          fixedHeader.classList.add('scrolled');
          headerLeft.classList.add('scrolled');
          langSwitcher.classList.add('scrolled');
        } else {
          fixedHeader.classList.remove('scrolled');
          headerLeft.classList.remove('scrolled');
          langSwitcher.classList.remove('scrolled');
        }
      });
    }
    
    // إخفاء الشريط عند التمرير لأسفل وإظهاره عند التمرير لأعلى
    function setupAutoHideHeader() {
      let lastScrollTop = 0;
      const fixedHeader = document.getElementById('fixedHeader');
      const delta = 10; // الحد الأدنى للتغير في التمرير
      
      window.addEventListener('scroll', function() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        // إظهار الشريط عند الوصول لأعلى الصفحة
        if (scrollTop <= 10) {
          fixedHeader.classList.remove('hide');
          lastScrollTop = scrollTop;
          return;
        }
        
        // إخفاء الشريط عند التمرير لأسفل
        if (Math.abs(lastScrollTop - scrollTop) > delta) {
          if (scrollTop > lastScrollTop) {
            fixedHeader.classList.add('hide');
          } else {
            fixedHeader.classList.remove('hide');
          }
          lastScrollTop = scrollTop;
        }
      });
    }

    function toggleSocialLinks() {
      const menu = document.getElementById("socialLinks");
      menu.style.display = menu.style.display === "flex" ? "none" : "flex";
    }

    document.addEventListener("click", function (e) {
      const menu = document.getElementById("socialLinks");
      const btn = document.querySelector(".floating-btn");
      if (!btn.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = "none";
      }
    });

    const stars = document.querySelectorAll(".stars span");
    const numbers = document.querySelectorAll(".rating-number");
    const modal = document.getElementById("feedbackModal");
    const confirmationModal = document.getElementById("confirmationModal");
    const errorMessage = document.getElementById("error-message");
    let currentRating = 0;

    stars.forEach((star, idx) => {
      star.addEventListener("mouseover", () => {
        if (localStorage.getItem('hasRated')) return;
        
        highlightRating(idx + 1);
      });
      
      star.addEventListener("mouseout", () => {
        if (localStorage.getItem('hasRated')) return;
        
        highlightRating(currentRating);
      });
      
      star.addEventListener("click", () => {
        if (localStorage.getItem('hasRated')) return;
        
        currentRating = idx + 1;
        highlightRating(currentRating);
        modal.style.display = "block";
        errorMessage.style.display = "none";
      });
    });

    numbers.forEach((number, idx) => {
      number.addEventListener("mouseover", () => {
        if (localStorage.getItem('hasRated')) return;
        
        highlightRating(idx + 1);
      });
      
      number.addEventListener("mouseout", () => {
        if (localStorage.getItem('hasRated')) return;
        
        highlightRating(currentRating);
      });
      
      number.addEventListener("click", () => {
        if (localStorage.getItem('hasRated')) return;
        
        currentRating = idx + 1;
        highlightRating(currentRating);
        modal.style.display = "block";
        errorMessage.style.display = "none";
      });
    });

    function highlightRating(rating) {
      stars.forEach((star, index) => {
        star.classList.toggle("active", index < rating);
      });
      
      numbers.forEach((number, index) => {
        number.classList.toggle("active", index < rating);
      });
    }

    function checkRatingStatus() {
      if (localStorage.getItem('hasRated')) {
        const lastRating = localStorage.getItem('lastRating');
        if (lastRating) {
          document.getElementById('lastRating').style.display = 'block';
          document.getElementById('user-rating').textContent = lastRating + ' ★';
          highlightRating(parseInt(lastRating));
        }
        
        stars.forEach(star => {
          star.classList.add('disabled');
        });
        
        numbers.forEach(number => {
          number.classList.add('disabled');
        });
      }
    }

    function submitFeedback() {
      const text = document.getElementById("feedbackText").value.trim();
      
      // التحقق من وجود محتوى في التعليق (حرف واحد على الأقل)
      if(text.length < 1) {
        errorMessage.style.display = "block";
        return;
      }
      
      errorMessage.style.display = "none";

      // حفظ حالة التقييم
      localStorage.setItem('hasRated', 'true');
      localStorage.setItem('lastRating', currentRating);
      
      // عرض رسالة الشكر
      document.getElementById('feedbackForm').style.display = 'none';
      document.getElementById('thankYouMessage').style.display = 'block';
      document.getElementById('submittedRating').textContent = currentRating + ' ★';
      
      // تحديث الصفحة لعرض التقييم الأخير
      setTimeout(() => {
        checkRatingStatus();
      }, 500);
    }

    function closeModal() {
      modal.style.display = 'none';
      document.getElementById('feedbackForm').style.display = 'block';
      document.getElementById('thankYouMessage').style.display = 'none';
      document.getElementById("feedbackText").value = '';
      errorMessage.style.display = "none";
    }

    function showConfirmationModal() {
      const lang = document.querySelector('.flag-btn.active').getAttribute('data-lang');
      const text = lang === 'ar' ? 'سيتم التواصل معك قريباً' : 'We will contact you soon';
      document.getElementById('confirmation-text').textContent = text;
      confirmationModal.style.display = 'block';
    }

    function closeConfirmationModal() {
      confirmationModal.style.display = 'none';
    }

    // إضافة معالجة إرسال النموذج
    document.getElementById('localForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // مسح محتوى النموذج
      this.reset();
      
      // تعطيل الزر لمدة 5 دقائق
      disableForm('localForm', 'submit-btn1', 'local-countdown', 300);
      
      // عرض رسالة التأكيد
      showConfirmationModal();
    });

    document.getElementById('intlForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // مسح محتوى النموذج
      this.reset();
      
      // تعطيل الزر لمدة 5 دقائق
      disableForm('intlForm', 'submit-btn2', 'intl-countdown', 300);
      
      // عرض رسالة التأكيد
      showConfirmationModal();
    });

    // تعطيل النموذج وبدء العداد التنازلي
    function disableForm(formId, buttonId, countdownId, seconds) {
      const button = document.getElementById(buttonId);
      const countdownElement = document.getElementById(countdownId);
      
      // تعطيل الزر
      button.disabled = true;
      
      // إظهار العداد
      countdownElement.style.display = 'block';
      
      // حفظ وقت الانتهاء في التخزين المحلي
      const endTime = Date.now() + seconds * 1000;
      localStorage.setItem(`${formId}_endTime`, endTime.toString());
      
      // بدء العداد التنازلي
      startCountdown(button, countdownElement, seconds, formId);
    }

    // بدء العداد التنازلي
    function startCountdown(button, countdownElement, seconds, formId) {
      let remaining = seconds;
      
      // تحديث العداد كل ثانية
      const countdownInterval = setInterval(() => {
        const minutes = Math.floor(remaining / 60);
        const secs = remaining % 60;
        
        // تحديث النص بناءً على اللغة
        const lang = document.querySelector('.flag-btn.active').getAttribute('data-lang');
        countdownElement.textContent = lang === 'ar' 
          ? `يمكنك إعادة الإرسال بعد ${minutes}:${secs.toString().padStart(2, '0')}`
          : `Resend available in ${minutes}:${secs.toString().padStart(2, '0')}`;
        
        remaining--;
        
        // عند انتهاء الوقت
        if (remaining < 0) {
          clearInterval(countdownInterval);
          button.disabled = false;
          countdownElement.style.display = 'none';
          localStorage.removeItem(`${formId}_endTime`);
        }
      }, 1000);
    }

    // التحقق من وجود توقيتات سابقة عند تحميل الصفحة
    function checkFormTimers() {
      const forms = [
        { id: 'localForm', buttonId: 'submit-btn1', countdownId: 'local-countdown' },
        { id: 'intlForm', buttonId: 'submit-btn2', countdownId: 'intl-countdown' }
      ];
      
      forms.forEach(form => {
        const endTime = localStorage.getItem(`${form.id}_endTime`);
        if (endTime) {
          const remainingSeconds = Math.max(0, Math.ceil((parseInt(endTime) - Date.now()) / 1000));
          
          if (remainingSeconds > 0) {
            const button = document.getElementById(form.buttonId);
            const countdownElement = document.getElementById(form.countdownId);
            
            button.disabled = true;
            countdownElement.style.display = 'block';
            startCountdown(button, countdownElement, remainingSeconds, form.id);
          } else {
            localStorage.removeItem(`${form.id}_endTime`);
          }
        }
      });
    }

    function changeLang(lang) {
      const en = {
        rating: "Rated <strong>4.5/5</strong> by <strong>3,344</strong> users",
        info: "Established: 26/1/2020 | Commercial Reg. No.: 54645612<br>Mahmoud Medhat Sadeq - Sole Owner of the Company",
        email: "mailto:mahway.contact@gmail.com?subject=Service Inquiry&body=Hello MahWay, I have a question about...",
        localTitle: "Local Shipping",
        intlTitle: "International Shipping",
        fast: "Fast",
        normal: "Normal",
        sender: "Sender Name",
        receiver: "Receiver Name",
        phone: "Phone Number",
        address: "Address",
        details: "Shipment Description",
        name: "Customer Name",
        cargo: "Cargo Type",
        weight: "Estimated Weight",
        country: "Shipping Country",
        deliveryAddress: "Delivery Address in Egypt",
        description: "Additional Details",
        submit: "Submit",
        feedbackTitle: "Write your comment or advice:",
        feedbackBtn: "Send",
        cancelBtn: "Cancel",
        feedbackPlaceholder: "Share your experience with us...",
        lastRating: "Your last rating:",
        errorMsg: "Please write a comment before sending (at least one character)",
        confirmation: "We will contact you soon"
      };

      const ar = {
        rating: "تقييم <strong>4.5/5</strong> من <strong>3,344</strong> مستخدم",
        info: "تأسست: 26/1/2020 | رقم السجل التجاري: 54645612<br>محمود مدحت صادق - المالك الوحيد للشركة",
        email: "mailto:mahway.contact@gmail.com?subject=استفسار عن خدمة&body=مرحباً ماه واي، لدي سؤال بخصوص...",
        localTitle: "شحن داخل مصر",
        intlTitle: "استيراد من خارج مصر",
        fast: "سريعة",
        normal: "عادية",
        sender: "اسم الراسل",
        receiver: "اسم المرسل إليه",
        phone: "رقم الهاتف",
        address: "العنوان",
        details: "وصف الشحنة",
        name: "اسم العميل",
        cargo: "نوع الحمولة",
        weight: "الوزن المتوقع",
        country: "الدولة المُرسِل منها",
        deliveryAddress: "العنوان في مصر",
        description: "تفاصيل إضافية",
        submit: "أرسل",
        feedbackTitle: "اكتب تعليقك أو نصيحتك:",
        feedbackBtn: "إرسال",
        cancelBtn: "إلغاء",
        feedbackPlaceholder: "شاركنا بتجربتك معنا...",
        lastRating: "آخر تقييم لك:",
        errorMsg: "الرجاء كتابة تعليق قبل الإرسال (حرف واحد على الأقل)",
        confirmation: "سيتم التواصل معك قريباً"
      };

      const content = lang === "ar" ? ar : en;
      
      document.getElementById("rating-text").innerHTML = content.rating;
      document.getElementById("info-text").innerHTML = content.info;
      document.getElementById("email-link").setAttribute("href", content.email);
      document.getElementById("local-title").innerText = content.localTitle;
      document.getElementById("intl-title").innerText = content.intlTitle;
      document.getElementById("confirmation-text").innerText = content.confirmation;
      
      // تحديث حقول النموذج الأول
      document.querySelector('#localForm input[name="sender"]').placeholder = content.sender;
      document.querySelector('#localForm input[name="receiver"]').placeholder = content.receiver;
      document.getElementById("phone1").placeholder = content.phone;
      document.querySelector('#localForm input[name="address"]').placeholder = content.address;
      document.querySelector('#localForm textarea[name="details"]').placeholder = content.details;
      document.getElementById("submit-btn1").innerText = content.submit;
      
      // تحديث حقول النموذج الثاني
      document.querySelector('#intlForm input[name="name"]').placeholder = content.name;
      document.getElementById("phone2").placeholder = content.phone;
      document.querySelector('#intlForm input[name="cargo"]').placeholder = content.cargo;
      document.querySelector('#intlForm input[name="weight"]').placeholder = content.weight;
      document.querySelector('#intlForm input[name="country"]').placeholder = content.country;
      document.querySelector('#intlForm input[name="delivery-address"]').placeholder = content.deliveryAddress;
      document.querySelector('#intlForm textarea[name="description"]').placeholder = content.description;
      document.getElementById("submit-btn2").innerText = content.submit;
      
      // تحديث خيارات الخدمة
      document.getElementById("local-service").options[0].text = content.fast;
      document.getElementById("local-service").options[1].text = content.normal;
      document.getElementById("intl-service").options[0].text = content.fast;
      document.getElementById("intl-service").options[1].text = content.normal;
      
      // تحديث نموذج التقييم
      document.getElementById("feedback-title").innerText = content.feedbackTitle;
      document.getElementById("feedback-btn").innerText = content.feedbackBtn;
      document.getElementById("cancel-btn").innerText = content.cancelBtn;
      document.getElementById("feedbackText").placeholder = content.feedbackPlaceholder;
      document.getElementById("last-rating-text").innerHTML = content.lastRating + ' <span id="user-rating"></span>';
      document.getElementById("error-message").innerText = content.errorMsg;
      document.getElementById("confirmation-btn").innerText = lang === "ar" ? "حسناً" : "OK";
    }
  </script>
</body>
</html>
